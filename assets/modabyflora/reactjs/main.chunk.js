(this["webpackJsonpdev-awesome-tool"]=this["webpackJsonpdev-awesome-tool"]||[]).push([[0],{125:function(e,t,n){e.exports=n(267)},130:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));var a=n(2);function r(){var e=a.authenticationService.currentUserValue;return e&&e.access?{Authorization:"Bearer ".concat(e.access)}:{}}function c(e){return e.text().then((function(t){console.log("handling responses: "+t);var n=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&(a.authenticationService.logout(),window.location.reload(!0));var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))}var o=n(11),s=Object(o.a)()},2:function(e,t,n){"use strict";var a=n(79);n.d(t,"authenticationService",(function(){return a.a}));var r=n(80);n.d(t,"userService",(function(){return r.a}));n(32)},267:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(54),o=n.n(c),s=(n(130),n(7)),l=n(8),i=n(10),u=n(9),m=n(3),A=n(37),d=n(18),v=n(2),p=n(124),h=function(e){var t=e.component,n=Object(p.a)(e,["component"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){return v.authenticationService.currentUserValue?r.a.createElement(t,e):r.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},f=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={currentUser:v.authenticationService.currentUserValue,users:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.userService.getAll().then((function(t){return e.setState({users:t})}))}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.users;return r.a.createElement("div",null,r.a.createElement("h1",null,"Hi ",t.firstName,"!"),r.a.createElement("p",null,"You're logged in with React & JWT!!"),r.a.createElement("h3",null,"Users from secure api end point:"),n&&r.a.createElement("ul",null,n.results.map((function(e){return r.a.createElement("li",{key:e.id},e.title," ",e.description)}))))}}]),n}(r.a.Component),g=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={currentUser:v.authenticationService.currentUserValue,users:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.userService.getAll().then((function(t){return e.setState({users:t})}))}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.users;return r.a.createElement("div",null,r.a.createElement("h1",null,"Hi ",t.firstName,"!"),r.a.createElement("p",null,"Checkout page !!! "),r.a.createElement("h3",null,"Users from secure api end point:"),n&&r.a.createElement("ul",null,n.results.map((function(e){return r.a.createElement("li",{key:e.id},e.title," ",e.description)}))))}}]),n}(r.a.Component),E=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={currentUser:v.authenticationService.currentUserValue,users:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.userService.getAll().then((function(t){return e.setState({users:t})}))}},{key:"render",value:function(){var e=this.state;e.currentUser,e.users;return r.a.createElement("div",null,r.a.createElement("h1",null,"Shop page!"),r.a.createElement("p",null,"Products displayed here "))}}]),n}(r.a.Component),b=n(19),w=n(39),k=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),v.authenticationService.currentUserValue&&a.props.history.push("/"),a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"alert alert-info"},"Username: test",r.a.createElement("br",null),"Password: test"),r.a.createElement("h2",null,"Login"),r.a.createElement(b.d,{initialValues:{username:"",password:""},validationSchema:w.object().shape({username:w.string().required("Username is required"),password:w.string().required("Password is required")}),onSubmit:function(t,n){var a=t.username,r=t.password,c=n.setStatus,o=n.setSubmitting;c(),v.authenticationService.login(a,r).then((function(t){var n=(e.props.location.state||{from:{pathname:"/"}}).from;e.props.history.push(n)}),(function(e){o(!1),c(e)}))},render:function(e){var t=e.errors,n=e.status,a=e.touched,c=e.isSubmitting;return r.a.createElement(b.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(b.b,{name:"username",type:"text",className:"form-control"+(t.username&&a.username?" is-invalid":"")}),r.a.createElement(b.a,{name:"username",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(b.b,{name:"password",type:"password",className:"form-control"+(t.password&&a.password?" is-invalid":"")}),r.a.createElement(b.a,{name:"password",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:c},"Login"),c&&r.a.createElement("img",{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="})),n&&r.a.createElement("div",{className:"alert alert-danger"},n))}}))}}]),n}(r.a.Component),O=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={currentUser:v.authenticationService.currentUserValue,users:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.userService.getAll().then((function(t){return e.setState({users:t})}))}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.users;return r.a.createElement("div",null,r.a.createElement("h1",null,"Hi ",t.firstName,"!"),r.a.createElement("p",null,"Cart page !!! "),r.a.createElement("h3",null,"Users from secure api end point:"),n&&r.a.createElement("ul",null,n.results.map((function(e){return r.a.createElement("li",{key:e.id},e.title," ",e.description)}))))}}]),n}(r.a.Component),j=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={currentUser:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.authenticationService.currentUser.subscribe((function(t){return e.setState({currentUser:t})}))}},{key:"logout",value:function(){v.authenticationService.logout(),d.c.push("/login")}},{key:"render",value:function(){var e=this.state.currentUser;return r.a.createElement(m.c,{history:d.c},r.a.createElement("div",null,e&&r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(A.a,{to:"/",className:"nav-item nav-link"},"Home"),r.a.createElement(A.a,{to:"/checkout",className:"nav-item nav-link"},"Checkout"),r.a.createElement("a",{onClick:this.logout,className:"nav-item nav-link"},"Logout"))),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(h,{exact:!0,path:"/",component:f}),r.a.createElement(h,{exact:!0,path:"/checkout",component:g}),r.a.createElement(h,{exact:!0,path:"/cart",component:O}),r.a.createElement(m.b,{path:"/login",component:k}),r.a.createElement(m.b,{path:"/shop",component:E})))))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={currentUser:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.authenticationService.currentUser.subscribe((function(t){return e.setState({currentUser:t})}))}},{key:"render",value:function(){return this.state.currentUser?r.a.createElement("div",{className:"nav-item avatar dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",id:"navbarDropdownMenuLink-55","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",style:{top:"-5px"}},r.a.createElement("img",{src:"https://mdbootstrap.com/img/Photos/Avatars/img (1).jpg",className:"rounded-circle",alt:"avatar image",style:{height:"35px"}})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-lg-right dropdown-dark","aria-labelledby":"navbarDropdownMenuLink-55"},r.a.createElement("a",{className:"dropdown-item",href:"/account"},"Mon compte"),r.a.createElement("a",{className:"dropdown-item",href:"/account"},"Mes commandes"),r.a.createElement("a",{onClick:v.authenticationService.logout,id:"navbar-userlogout",class:"dropdown-item"},"Se d\xe9connecter"))):r.a.createElement("a",{className:"nav-link waves-effect",href:"/login"},"Login")}}]),n}(r.a.Component);document.addEventListener("DOMContentLoaded",(function(e){console.log("Loading react components ...");var t=document.getElementById("navbar-login-link");"undefined"!==typeof t&&null!==t?(console.log("Found login element"),o.a.render(r.a.createElement(S,null),t)):console.log("Login element not found!");var n=document.getElementById("navbar-cart-link");"undefined"!==typeof n&&null!==n?(console.log("Found cart element"),o.a.render(r.a.createElement(O,null),n)):console.log("Cart element not found!"),o.a.render(r.a.createElement(j,null),document.getElementById("one")),console.log("... Done")})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},32:function(e,t){e.exports={api_url:"http://localhost:8002"}},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(268),r=n(18),c=n(32),o=new a.a(JSON.parse(localStorage.getItem("currentUser"))),s={login:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("".concat(c.api_url,"/api-token-auth/"),n).then(r.b).then((function(e){return localStorage.setItem("currentUser",JSON.stringify(e)),o.next(e),e}))},logout:function(){localStorage.removeItem("currentUser"),o.next(null)},currentUser:o.asObservable(),get currentUserValue(){return o.value}}},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(18),r=n(32),c={getAll:function(){var e={method:"GET",headers:Object(a.a)()};return fetch("".concat(r.api_url,"/api/items"),e).then(a.b)}}}},[[125,1,2]]]);
//# sourceMappingURL=main.70b75688.chunk.js.map