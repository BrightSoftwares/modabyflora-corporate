(this["webpackJsonpdev-awesome-tool"]=this["webpackJsonpdev-awesome-tool"]||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c}));var a=n(6);function r(){var e=a.authenticationService.currentUserValue;return e&&e.token?{Authorization:"Bearer ".concat(e.token)}:{}}function o(){var e=[{id:1,username:"test",password:"test",firstName:"Test",lastName:"User"}],t=window.fetch;window.fetch=function(n,a){var r="Bearer fake-jwt-token"===a.headers.Authorization;return new Promise((function(o,s){setTimeout((function(){if(n.endsWith("/users/authenticate")&&"POST"===a.method){var s=JSON.parse(a.body),i=e.find((function(e){return e.username===s.username&&e.password===s.password}));return i?u({id:i.id,username:i.username,firstName:i.firstName,lastName:i.lastName,token:"fake-jwt-token"}):(c="Username or password is incorrect",void o({status:400,text:function(){return Promise.resolve(JSON.stringify({message:c}))}}))}var c;if(n.endsWith("/users")&&"GET"===a.method)return r?u(e):void o({status:401,text:function(){return Promise.resolve(JSON.stringify({message:"Unauthorised"}))}});function u(e){o({ok:!0,text:function(){return Promise.resolve(JSON.stringify(e))}})}t(n,a).then((function(e){return o(e)}))}),500)}))}}function s(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&(a.authenticationService.logout(),window.location.reload(!0));var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))}var i=n(7),c=Object(i.a)()},125:function(e,t,n){e.exports=n(267)},130:function(e,t,n){},267:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(38),s=n.n(o),i=(n(130),n(30)),c=n(31),u=n(33),l=n(32),A=n(2),m=n(74),d=n(11),f=n(6),h=n(124),v=function(e){var t=e.component,n=Object(h.a)(e,["component"]);return r.a.createElement(A.b,Object.assign({},n,{render:function(e){return f.authenticationService.currentUserValue?r.a.createElement(t,e):r.a.createElement(A.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={currentUser:f.authenticationService.currentUserValue,users:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;f.userService.getAll().then((function(t){return e.setState({users:t})}))}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.users;return r.a.createElement("div",null,r.a.createElement("h1",null,"Hi ",t.firstName,"!"),r.a.createElement("p",null,"You're logged in with React & JWT!!"),r.a.createElement("h3",null,"Users from secure api end point:"),n&&r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e.id},e.firstName," ",e.lastName)}))))}}]),n}(r.a.Component),g=n(20),p=n(54),w=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),a=t.call(this,e),f.authenticationService.currentUserValue&&a.props.history.push("/"),a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"alert alert-info"},"Username: test",r.a.createElement("br",null),"Password: test"),r.a.createElement("h2",null,"Login"),r.a.createElement(g.d,{initialValues:{username:"",password:""},validationSchema:p.object().shape({username:p.string().required("Username is required"),password:p.string().required("Password is required")}),onSubmit:function(t,n){var a=t.username,r=t.password,o=n.setStatus,s=n.setSubmitting;o(),f.authenticationService.login(a,r).then((function(t){var n=(e.props.location.state||{from:{pathname:"/"}}).from;e.props.history.push(n)}),(function(e){s(!1),o(e)}))},render:function(e){var t=e.errors,n=e.status,a=e.touched,o=e.isSubmitting;return r.a.createElement(g.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(g.b,{name:"username",type:"text",className:"form-control"+(t.username&&a.username?" is-invalid":"")}),r.a.createElement(g.a,{name:"username",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(g.b,{name:"password",type:"password",className:"form-control"+(t.password&&a.password?" is-invalid":"")}),r.a.createElement(g.a,{name:"password",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:o},"Login"),o&&r.a.createElement("img",{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="})),n&&r.a.createElement("div",{className:"alert alert-danger"},n))}}))}}]),n}(r.a.Component),b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={currentUser:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;f.authenticationService.currentUser.subscribe((function(t){return e.setState({currentUser:t})}))}},{key:"logout",value:function(){f.authenticationService.logout(),d.d.push("/login")}},{key:"render",value:function(){var e=this.state.currentUser;return r.a.createElement(A.c,{history:d.d},r.a.createElement("div",null,e&&r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(m.a,{to:"/",className:"nav-item nav-link"},"Home"),r.a.createElement("a",{onClick:this.logout,className:"nav-item nav-link"},"Logout"))),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(v,{exact:!0,path:"/",component:E}),r.a.createElement(A.b,{path:"/login",component:w})))))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(d.b)();var k=function(){return r.a.createElement("div",{style:{height:"100%",backgroundColor:"#D7B49E"}})},N=function(){return r.a.createElement("div",{style:{height:"100%",backgroundColor:"#DC602E"}})},C=function(){return r.a.createElement("div",{style:{height:"100%",backgroundColor:"#BC412B"}})};s.a.render(r.a.createElement(k,null),document.getElementById("four")),s.a.render(r.a.createElement(N,null),document.getElementById("two")),s.a.render(r.a.createElement(C,null),document.getElementById("three")),s.a.render(r.a.createElement(b,null),document.getElementById("one")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},28:function(e,t){},6:function(e,t,n){"use strict";var a=n(79);n.d(t,"authenticationService",(function(){return a.a}));var r=n(80);n.d(t,"userService",(function(){return r.a}));n(28)},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(268),r=n(11),o=n(28),s=n.n(o),i=new a.a(JSON.parse(localStorage.getItem("currentUser"))),c={login:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("".concat(s.a,"/users/authenticate"),n).then(r.c).then((function(e){return localStorage.setItem("currentUser",JSON.stringify(e)),i.next(e),e}))},logout:function(){localStorage.removeItem("currentUser"),i.next(null)},currentUser:i.asObservable(),get currentUserValue(){return i.value}}},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(11),r=n(28),o=n.n(r),s={getAll:function(){var e={method:"GET",headers:Object(a.a)()};return fetch("".concat(o.a,"/users"),e).then(a.c)}}}},[[125,1,2]]]);
//# sourceMappingURL=main.f9165371.chunk.js.map